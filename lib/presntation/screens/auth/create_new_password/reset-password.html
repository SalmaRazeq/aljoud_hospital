<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
</head>
<body>
<h1>Reset Your Password</h1>
<p>Please enter your new password below.</p>

<input type="password" id="new-password" placeholder="New Password" />
<button onclick="resetPassword()">Reset Password</button>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBjMXB1G-4g9cIMna5xltXqnAPIIKk3jvw", // API Key
        authDomain: "aljoud-hospital.firebaseapp.com", // Auth domain
        projectId: "aljoud-hospital", // Project ID
        storageBucket: "aljoud-hospital.appspot.com", // Storage bucket
        messagingSenderId: "1075425091036", // Messaging Sender ID
        appId: "1:1075425091036:web:eeb8b9d777137bbc9a8319"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const urlParams = new URLSearchParams(window.location.search);
    const oobCode = urlParams.get('oobCode');

    function resetPassword() {
        const newPassword = document.getElementById('new-password').value;

        if (!newPassword) {
            alert("Please enter a new password.");
            return;
        }

        auth.confirmPasswordReset(oobCode, newPassword)
            .then(() => {
                alert('Password has been reset successfully!');
                window.location.href = 'login.html';
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                alert(`Error: ${errorMessage}`);
            });
    }
</script>
</body>
</html>
